<x-page>
	<x-data
		name="metricCards"
		defaultValue='[
			{
				"title": "Active Issues",
				"value": "12",
				"subtitle": "+2 from last week",
				"icon": "ListAlt",
				"color": "var(--palettePrimaryMain)"
			},
			{
				"title": "Completed Tasks",
				"value": "48",
				"subtitle": "+8 from last week",
				"icon": "Success",
				"color": "var(--paletteSuccessMain)"
			},
			{
				"title": "Team Members",
				"value": "8",
				"subtitle": "All active",
				"icon": "People",
				"color": "var(--paletteInfoMain)"
			},
			{
				"title": "Project Progress",
				"value": "75%",
				"subtitle": "On track for deadline",
				"icon": "LineChart",
				"color": "var(--paletteWarningMain)"
			}
		]'
	></x-data>

	<x-data
		name="chartData"
		defaultValue='[
			{"value": 12, "label": "Jan"},
			{"value": 19, "label": "Feb"},
			{"value": 15, "label": "Mar"},
			{"value": 25, "label": "Apr"},
			{"value": 22, "label": "May"},
			{"value": 30, "label": "Jun"}
		]'
	></x-data>

	<x-data
		name="pieData"
		defaultValue='[
			{"value": 35, "label": "Frontend"},
			{"value": 25, "label": "Backend"},
			{"value": 20, "label": "Database"},
			{"value": 15, "label": "DevOps"},
			{"value": 5, "label": "Other"}
		]'
	></x-data>

	<x-data
		name="recentActivity"
		defaultValue='[
			{
				"user": "John Doe",
				"action": "completed task",
				"item": "Update user interface",
				"time": "2 hours ago",
				"icon": "Person"
			},
			{
				"user": "Sarah Wilson",
				"action": "created new issue",
				"item": "Bug in login form",
				"time": "4 hours ago",
				"icon": "Add"
			},
			{
				"user": "Alex Rodriguez",
				"action": "commented on",
				"item": "API integration discussion",
				"time": "6 hours ago",
				"icon": "Edit"
			},
			{
				"user": "Mike Johnson",
				"action": "updated project documentation",
				"item": "",
				"time": "1 day ago",
				"icon": "Edit"
			},
			{
				"user": "Emma Davis",
				"action": "assigned task",
				"item": "Code review for payment module",
				"time": "1 day ago",
				"icon": "Person"
			},
			{
				"user": "Lisa Chen",
				"action": "resolved issue",
				"item": "Database connection timeout",
				"time": "2 days ago",
				"icon": "Success"
			},
			{
				"user": "David Kim",
				"action": "created new branch",
				"item": "feature/user-authentication",
				"time": "3 days ago",
				"icon": "Add"
			},
			{
				"user": "Maria Garcia",
				"action": "deployed to",
				"item": "staging environment",
				"time": "3 days ago",
				"icon": "Success"
			},
			{
				"user": "Tom Wilson",
				"action": "merged pull request",
				"item": "Fix responsive design issues",
				"time": "4 days ago",
				"icon": "Success"
			},
			{
				"user": "Jennifer Lee",
				"action": "created new feature",
				"item": "Dark mode toggle",
				"time": "4 days ago",
				"icon": "Add"
			},
			{
				"user": "Carlos Mendez",
				"action": "updated dependencies",
				"item": "React to v18.2.0",
				"time": "5 days ago",
				"icon": "Edit"
			},
			{
				"user": "Rachel Green",
				"action": "fixed bug",
				"item": "Memory leak in data processing",
				"time": "5 days ago",
				"icon": "Success"
			},
			{
				"user": "Kevin Park",
				"action": "wrote tests for",
				"item": "User authentication module",
				"time": "6 days ago",
				"icon": "Edit"
			},
			{
				"user": "Amanda Foster",
				"action": "reviewed code",
				"item": "Payment integration PR",
				"time": "1 week ago",
				"icon": "Person"
			},
			{
				"user": "James Taylor",
				"action": "optimized performance",
				"item": "Database queries",
				"time": "1 week ago",
				"icon": "Success"
			},
			{
				"user": "Sofia Martinez",
				"action": "created documentation",
				"item": "API endpoints guide",
				"time": "1 week ago",
				"icon": "Edit"
			},
			{
				"user": "Nina Patel",
				"action": "refactored",
				"item": "Component architecture",
				"time": "2 weeks ago",
				"icon": "Edit"
			}
		]'
	></x-data>

	<x-navbar>
		<x-button
			label="NEW PROJECT"
			class="primary"
		/>
	</x-navbar>

	<x-content>
		<x-markdown>
			Welcome to the **Project Management Dashboard**. This document outlines
			**goals**, **tasks**, and **progress tracking**.
		</x-markdown>

		<!-- Stats Grid -->
		<x-box
			sx:display="grid"
			sx:gridTemplateColumns="repeat(auto-fit, minmax(400px, 1fr))"
			sx:gap="3"
			sx:mb="3"
		>
			<x-map items="global_metricCards">
				<x-box
					sx:background="var(--paletteBackgroundPaper)"
					sx:borderRadius="8px"
					sx:p="3"
					sx:border="1px solid var(--paletteDivider)"
				>
					<x-box
						sx:display="flex"
						sx:alignItems="center"
						sx:mb="2"
					>
						<x-icon
							icon="{{item_icon}}"
							color="{{item_color}}"
							size="large"
							sx:mr="1"
						></x-icon>
						<x-typography variant="label">
							{{ item_title }}
						</x-typography>
					</x-box>
					<x-typography
						variant="h2"
						sx:mb="1"
					>
						{{ item_value }}
					</x-typography>
					<x-typography
						variant="body2"
						sx:whiteSpace="nowrap"
						sx:overflow="hidden"
						sx:textOverflow="ellipsis"
					>
						{{ item_subtitle }}
					</x-typography>
				</x-box>
			</x-map>
		</x-box>

		<!-- Charts Section -->
		<x-box
			sx:display="grid"
			sx:gridTemplateColumns="repeat(auto-fit, minmax(400px, 1fr))"
			sx:gap="3"
			sx:mb="3"
		>
			<x-box
				sx:background="var(--paletteBackgroundPaper)"
				sx:borderRadius="8px"
				sx:p="3"
				sx:border="1px solid var(--paletteDivider)"
				sx:height="300px"
				sx:display="flex"
				sx:flexDirection="column"
			>
				<x-typography
					variant="h3"
					sx:mb="2"
				>
					Monthly Progress
				</x-typography>
				<x-viz-bar data="global_chartData"></x-viz-bar>
			</x-box>

			<x-box
				sx:background="var(--paletteBackgroundPaper)"
				sx:borderRadius="8px"
				sx:p="3"
				sx:border="1px solid var(--paletteDivider)"
				sx:height="300px"
				sx:display="flex"
				sx:flexDirection="column"
			>
				<x-typography
					variant="h3"
					sx:mb="2"
				>
					Project Distribution
				</x-typography>
				<x-viz-pie data="global_pieData"></x-viz-pie>
			</x-box>
		</x-box>

		<!-- Markdown Section -->
		<!-- prettier-ignore -->
		<x-markdown>
				## 1. Project Overview
				- **Project Name:** Apollo Revamp
				- **Start Date:** 2025-09-01  
				- **Target Release:** 2026-01-15
				
				> _“Plans are useless, but planning is indispensable.”_ — Dwight Eisenhower
				
				---
				
				## 2. Goals
				1. ✅ Improve user onboarding flow  
				2. ⏳ Upgrade backend API performance  
				3. ❌ Reduce churn rate to below 5%
				
				---
				
				## 3. Task Breakdown
				
				### 🔧 Development
				- [x] Set up CI/CD pipeline
				- [ ] Implement auth service (ETA: Oct 15)
				- [ ] Add GraphQL support
				- [ ] Write integration tests
				
				### 🎨 Design
				- [x] Refresh brand color palette
				- [ ] Finalize mobile layouts
				- [ ] Add dark mode theme
				
				### 📢 Marketing
				- [ ] Draft launch campaign
				- [ ] Secure press coverage
				- [ ] Collect beta feedback
				
				---
				
				## 4. Priority Matrix
				
				| Task                  | Priority | Status   |
				|-----------------------|----------|----------|
				| CI/CD Setup           | High     | Done ✅  |
				| Auth Service          | High     | In Prog. |
				| Dark Mode             | Medium   | Pending  |
				| Launch Campaign       | High     | Pending  |
				| GraphQL Support       | Low      | Pending  |
				
				---
				
				## 5. Risks & Mitigations
				- **Risk:** API scaling issues  
					**Mitigation:** Introduce load testing early  
				- **Risk:** Design delays  
					**Mitigation:** Allocate backup designer resources  
				- **Risk:** Marketing miss  
					**Mitigation:** Engage external PR support
				
				---
				
				## 6. Resources
				- [Confluence Docs](https://confluence.example.com/apollo)
				- [Design Mockups](https://figma.example.com/apollo)
				- [CI/CD Pipeline](https://ci.example.com/apollo)
				
				---
				
				## 7. Notes
				> ℹ️ Weekly standups occur **Monday at 10AM EST**.  
				> Action items are reviewed every Friday.
				
				---
				
				## 8. Code Snippets
				Example for setting up API endpoint:
				
				```js
				import express from 'express';
				const app = express();
				
				app.get('/health', (req, res) => {
					res.json({ status: 'ok' });
				});
				
				app.listen(3000, () => console.log('API running...'));
				```
			</x-markdown>

		<!-- Recent Activity Section -->
		<x-box
			sx:background="var(--paletteBackgroundPaper)"
			sx:borderRadius="8px"
			sx:p="3"
			sx:border="1px solid var(--paletteDivider)"
			sx:display="flex"
			sx:flexDirection="column"
			sx:gap="2"
			sx:mb="4"
			sx:mt="4"
		>
			<x-box
				sx:display="flex"
				sx:alignItems="center"
				sx:mb="2"
			>
				<x-icon
					icon="History"
					color="var(--palettePrimaryMain)"
					size="large"
					sx:mr="1"
				></x-icon>
				<x-typography variant="label"> Recent Activity </x-typography>
			</x-box>

			<x-box
				sx:display="flex"
				sx:flexDirection="column"
				sx:gap="2"
			>
				<x-map items="global_recentActivity">
					<x-box
						sx:display="flex"
						sx:alignItems="center"
						sx:gap="2"
						sx:py="1"
					>
						<x-icon
							icon="{{item_icon}}"
							color="var(--paletteTextSecondary)"
							size="medium"
						></x-icon>
						<x-typography variant="body2">
							{{ item_user }} {{ item_action }} "{{ item_item }}"
						</x-typography>
						<x-typography
							variant="caption"
							sx:ml="auto"
						>
							{{ item_time }}
						</x-typography>
					</x-box>
				</x-map>
			</x-box>
		</x-box>
	</x-content>
</x-page>
